{% extends "base.html" %}
{% block title %}Mis Clases{% endblock %}

{% block content %}
<div class="contenedor-clases">
    <h1>Bienvenido, {{ nombre_profesor }}</h1>
    <h2>ğŸ“š Mis Clases</h2>

    <!-- Filtro desplegable -->
    <label for="filtro-clase"><strong>Filtrar por clase:</strong></label>
    <select id="filtro-clase" class="input-buscador">
        <option value="todas">Todas</option>
        {% for clase in clases %}
            <option value="{{ clase[1] | lower | replace(' ', '-') }}">{{ clase[1] }}</option>
        {% endfor %}
    </select>

    {% if clases %}
    <table class="tabla-clases">
        <thead>
            <tr>
                <th>ğŸ“˜ Nombre</th>
                <th>ğŸ“… Fecha</th>
                <th>âš™ï¸ Opciones</th>
            </tr>
        </thead>
        <tbody>
            {% for clase in clases %}
            <tr class="fila-clase" data-nombre="{{ clase[1] | lower | replace(' ', '-') }}">
                <td>{{ clase[1] }}</td>
                <td>{{ clase[2] }}</td>
                <td>
                    <a href="{{ url_for('asistencia', clase_id=clase[0]) }}" class="btn">âœ… Pasar asistencia</a>
                    <a href="{{ url_for('ingresar_alumno', clase_id=clase[0]) }}" class="btn">ğŸ“¤ Ingresar alumno</a>
                    <a href="{{ url_for('listar_alumnos', clase_id=clase[0]) }}" class="btn">ğŸ‘¥ Ver alumnos</a>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% else %}
    <p>No hay clases asignadas aÃºn.</p>
    {% endif %}
</div>

<!-- Script para filtrar por clase -->
<script>
document.getElementById('filtro-clase').addEventListener('change', function () {
    const seleccion = this.value;
    const filas = document.querySelectorAll('.fila-clase');

    filas.forEach(fila => {
        const nombreClase = fila.getAttribute('data-nombre');
        if (seleccion === 'todas' || nombreClase === seleccion) {
            fila.style.display = '';
        } else {
            fila.style.display = 'none';
        }
    });
});
</script>
{% endblock %}

